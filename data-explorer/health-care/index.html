<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PB98MPZ31B"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PB98MPZ31B');
</script>




<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Health care data for NYC &#x7c; Environment &amp; Health Data Portal</title>


<meta name="description" content="Here is the site global SEO description">
<link rel="canonical" href="https://nychealth.github.io/EH-dataportal/data-explorer/health-care/" />
<meta name="robots" content="all" />
<meta name="geo.region" content="" />
<meta name="geo.placename" content="Environment &amp; Health Data Portal" />


<meta property="fb:profile_id" content="0" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_us" />
<meta property="og:url" content="https://nychealth.github.io/EH-dataportal/data-explorer/health-care/" />
<meta property="og:title" content="Health care data for NYC&ndash; Environment &amp; Health Data Portal" />
<meta property="og:description" content="Explore data, visualizations, and more." />
<meta property="og:site_name" content="Environment &amp; Health Data Portal" />
<meta property="og:image" content="https://nychealth.github.io/EH-dataportal/images/report_bottom_background_hu55023dbc37de342337a21cf33dcc5889_222582_2400x1260_fill_q95_mitchellnetravali_smart1.jpg"><meta property="og:see_also" content="https://twitter.com/nycHealthy" />
<meta name="twitter:title" content="Health care data for NYC&ndash; Environment &amp; Health Data Portal">
<meta name="twitter:description" content="Explore data, visualizations, and more.">
<meta name="twitter:image" content="/images/report_bottom_background.jpg">
<meta name="twitter:site" content="@nycHealthy">
<meta name="twitter:creator" content="@nycHealthy">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>





<link rel="icon" href="https://nychealth.github.io/EH-dataportal//7618350_heatmap_business_analytics_statistics_icon-gpr.ico">


<link rel="stylesheet" href="https://nychealth.github.io/EH-dataportal//fontawesome/css/all.min.css">

<link rel="stylesheet" href="https://nychealth.github.io/EH-dataportal/scss/theme.css" />


<script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.10/dist/purify.min.js"
    integrity="sha256-keaR/uWEpEmmUnoJ6BemH9gp9Ng8u/YplhVwdmmquNY="
    crossorigin="anonymous"></script>

<script>
    let sitepath = "\/EH-dataportal";
    let baseURL = "https:\/\/nychealth.github.io\/EH-dataportal\/";
    let data_repo = "https:\/\/raw.githubusercontent.com\/nychealth\/EHDP-data";
    let data_branch = "production";
</script></head>
<body>
  
  
<a class="sr-only sr-only-focusable skip-menu" href="#skip-header-target">Skip Header</a>

<header id="global-header" role="banner">

    <div class="bg-black text-white" id="nyc-top-header">

        <div class="container-fluid wide">

            <div class="row py-1 align-items-center justify-content-between">

                <div class="col-auto">
                    <p class="d-none d-md-flex fs-md">
                        <a class="text-reset" href="https://www1.nyc.gov/">
                            <strong>nyc.gov</strong>
                        </a>
                        <span class="mx-1" aria-hidden="true">|</span>
                        Health
                    </p>
                </div>
                

                <div class="col-auto">

                    <ul class="extensible-list horizontal fs-md">
                        <li>
                            <a class="text-reset" href="https://www1.nyc.gov/">
                                <strong>
                                    311
                                </strong>
                            </a>
                        </li>
                        <li>
                            <a class="text-reset" href="https://www1.nyc.gov/home/search/index.page">
                                <strong>
                                    Search all NYC.gov
                                </strong>
                            </a>
                        </li>
                        <li>
                            <a href="https://www1.nyc.gov/" title="Go to nyc.gov">
                                <img class="d-block" src="https://nychealth.github.io/EH-dataportal//images/nyc-bubble-logo.svg" width="45" alt="NYC Logo">
                            </a>
                        </li>
                    </ul>

                </div>
                

            </div>
            

        </div>
        

    </div>
    
    <div class="site-header bg-primary" style="background-image: url(https://nychealth.github.io/EH-dataportal//images/header_background.jpg)">
    
        <div class="wrap-header">

            <div class="container-fluid wide">

                <div class="row align-items-center">

                    <div class="col-lg py-4 pl-md-5">

                        <div class="d-flex justify-content-center justify-content-lg-start">

                            <p class="text-white">
                                <span class="site-title">Environment and Health Data Portal</span>
                                <span class="site-subtitle">Understand how environments shape health in New York City</span>
                            </p>


                        </div>
                        

                    </div>
                    

                    <div class="col-lg-auto border-top border-lg-0">

                        <div class="row no-gutters justify-content-between py-2">

                            
                            <div class="col-auto d-flex d-lg-none">

                                <button class="no-btn-style" type="button" data-toggle="collapse"
                                    data-target="#nav-primary" aria-controls="nav-primary" aria-expanded="false"
                                    aria-label="Toggle navigation">
                                    <span class="fas fa-bars fa-lg"></span>
                                </button>

                            </div>
                            

                            <div class="col-auto">

                                <ul class="extensible-list horizontal">
                                    <li>
                                        <button class="no-btn-style" type="button" title="Language"
                                            data-toggle="collapse" data-target="#global-language"
                                            aria-controls="global-language" aria-expanded="false">
                                            <span class="sr-only">Language</span>
                                            <span class="fas fa-language fa-2x"></span>
                                        </button>
                                    </li>
                                    <li>
                                        <button class="no-btn-style" type="button" title="Search" 
                                            data-toggle="collapse" data-target="#global-search" 
                                            aria-controls="global-search" aria-expanded="false">
                                            <span class="sr-only">Search</span>
                                            <span class="fas fa-search fa-lg"></span>
                                        </button>
                                    </li>
                                </ul>

                            </div>
                            

                        </div>
                        

                    </div>
                    

                </div>
                

            </div>
            

        </div>
        

        <div class="container-fluid border-top collapse" id="global-language">
            <div class="narrow py-2">
                <div id="google_translate_element"></div>
            </div>
        </div>

        <div class="container-fluid border-top collapse" id="global-search">
            <form class="narrow py-2" aria-label="Search" role="search">
                <div class="input-group">
                    <label class="sr-only" for="global-search-bar">Search</label>
                    <input class="form-control form-control-lg" id="global-search-bar" placeholder="Search">
                    <div class="input-group-btn">
                        <button class="btn btn-primary btn-lg" type="button" title="Search">
                            <span class="sr-only">Search</span>
                            <span class="fas fa-arrow-right"></span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="container-fluid collapse d-lg-block px-0 border-lg-top" id="nav-primary">

        <div class="wide"> 

            <nav class="nav nav-pills border-bottom" role="navigation"><div class="nav-item">

                    <a class="nav-link" href="https://nychealth.github.io/EH-dataportal/" id="nav-item-01">
                        <span class='text-primary'><i class='fa fa-home' aria-hidden='true'></i></span> Home
                    </a>

                </div>
                <div class="nav-item">

                    <a class="nav-link" href="https://nychealth.github.io/EH-dataportal/data-stories/" id="nav-item-02">
                        <span class='text-primary'><i class='fas fa-passport' aria-hidden='true'></i></span> Data Stories
                    </a>

                </div>
                <div class="nav-item">

                    <a class="nav-link" href="https://nychealth.github.io/EH-dataportal/neighborhood-reports/" id="nav-item-04">
                        <span class='text-primary'><i class='fas fa-map-marked-alt' aria-hidden='true'></i></span> Neighborhood Reports
                    </a>

                </div>
                <div class="nav-item">

                    <a class="nav-link" href="https://nychealth.github.io/EH-dataportal/key-topics/" id="nav-item-05">
                        <span class='text-primary'><i class='fas fa-star' aria-hidden='true'></i></span> Key Topics
                    </a>

                </div>
                <div class="nav-item active">

                    <a class="nav-link" href="https://nychealth.github.io/EH-dataportal/data-explorer/" id="nav-item-03">
                        <span class='text-primary'><i class='fas fa-chart-line' aria-hidden='true'></i></span> Data Explorer
                    </a>

                </div>
                </nav>

        </div>
        

    </div>

</header>
<main id="skip-header-target" role="main">

<style>
     

     
    #vg-tooltip-element table tr {
        border-bottom: 1px solid #d9d9d9;
        
    }
     
    #vg-tooltip-element table tr:last-child {
        border-bottom: 0px;
    }

     
    #vg-tooltip-element table tr td.key {
        font-size: 12px!important;
        color: #505050;
        border-right: 1px solid #d9d9d9;
        text-align: right;
        padding-right: 10px;
        width: max-content;
    }

     
    #vg-tooltip-element table tr td.value {
        font-size: 12px!important;
        color: black;
        text-align: left;
        padding-left: 10px;
        width: max-content;
    }

     
    #summary-table table thead tr th {
        font-size: 13px!important;
    }

     
    [aria-expanded="false"]>.expanded,
    [aria-expanded="true"]>.collapsed {
        display: none;
    }

    #truncate {
        display: block;
    }

    #full {
        display: none;
    }

    #expand-collapse {
        cursor: pointer;
    }

    .show {
        display: block !important;
    }

    .hide {
        display: none !important;
    }

     

    .dropdown-title {
        padding: 0.25rem 1.5rem;
    }

    .indicator-measures h6 {
        margin-top: 0.5em;
    }

    .dropdown-menu {
        z-index: 2000;
    }

    div[aria-labelledby="dropdownMapMeasures"].show {
        display: flex !important;
    }

     

    .topic-text {
        font-size: 12px!important;
    }

    .topic-text h3 {
        font-size: 16px;
        color: #656565;
    }

    .topic-text p li {
        font-size: 12px;
    }

     

    button.text-info, button.text-info {
        color: #841972 !important;
    }
    button.text-info:hover, button.text-info:focus {
        color: #ffffff !important;
    }

     

    .btn-outline-primary ~ .dropdown-menu .dropdown-item.active,
    .btn-outline-primary ~ .dropdown-menu .dropdown-item:active {
        color: #ffffff;
        text-decoration: none;
        background-color: #841972;
    }

    .btn-outline-secondary ~ .dropdown-menu .dropdown-item.active,
    .btn-outline-secondary ~ .dropdown-menu .dropdown-item:active {
        color: #ffffff;
        text-decoration: none;
        background-color: #181A7B;
    }

     

    .modal-backdrop.show {
        opacity: 0.70;
        background-color: #424242
    }

    .de-modal-title {
        margin-bottom: 0;
        margin-top: 0;
        line-height: 1;
    }

    .modal-header .close {
        padding: 0.5rem 0.5rem;
        margin: -1rem -1rem -1rem auto;
    }

     

    .checkbox-geo.disabled > input {
        accent-color: #656565;
    }

</style>

<article class="container-fluid" id="skip-header-target">
    <div class="row">
        <div class="col-md-11 mx-auto mt-4 mx-1">
            <nav aria-label="breadcrumb" class="mb-2">
                <ul class="breadcrumb mr-auto">
                    <li class="breadcrumb-item"><a href="https://nychealth.github.io/EH-dataportal/">Home</a></li>
                    <li class="breadcrumb-item"><a href="https://nychealth.github.io/EH-dataportal//data-explorer/">Data Explorer</a></li>
                    <li class="breadcrumb-item active"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-care/">Health care</a></li>
                    <li class="nav-item ml-auto">
                        <button type="button" class="btn btn-sm btn-outline-primary" data-toggle="modal"
                                data-target="#topicModal">
                            Change topic
                        </button>

                        

                    </li>
                </ul>
            </nav>

            <div class="row mb-1">
                <div class="col mx-2 ml-0 pl-0 py-2">
                    <h2>Health care</h2>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">

                    <div class="card content-card mb-2">
                        <div class="card-content">
                            <div class="card-body topic-text">
                                <span class='home-label d-none d-md-block border-bottom mb-1'>About this topic</span>
                                 <p>Health care is a valuable tool to stay healthy.</p>
<p>Health insurance coverage is associated with many health benefits. People with health insurance are more likely to have a regular doctor, receive preventive care services, better manage chronic health conditions, have longer life expectancy, and more.</p>
<p>However, not all New Yorkers can access appropriate amounts of care. Many New Yorkers remain uninsured. People without access to appropriate health care don&rsquo;t receive the care they need to stay healthy. They may postpone care, be unable to afford medication or treatment, and become sicker and die earlier than people with good health insurance and good health care.</p>

                            </div>

                        </div>


                    </div><div class="keywords"><strong>Keywords:</strong> <br><a href="https://nychealth.github.io/EH-dataportal/keywords/health-care">health care</a> |&#32;<a href="https://nychealth.github.io/EH-dataportal/keywords/doctors">doctors</a> |&#32;<a href="https://nychealth.github.io/EH-dataportal/keywords/mortality">mortality</a> |&#32;</div>
</div>

                <div class="col-md-8">
                    
                    <button class="btn btn-sm btn-outline-light text-primary btn-block d-block d-md-none mt-0 mb-2"
                            type="button" data-toggle="modal" data-target="#aboutModal">
                        About Health care
                    </button>


                    

                    <div class="card content-card topic-text">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="dropdown">

                                    <span class='home-label d-block'>Change dataset</span>

                                    <button class="btn btn-outline-primary btn-lg btn-block text-wrap text-info dropdown-toggle" type="button"
                                            id="dropdownIndicator" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        More Health care data
                                    </button>

                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownIndicator"
                                         id="indicator-dropdown">
                                        
                                    </div>

                                </div>


                                <div style="clear:both" class="my-2">
                                    <span class="home-label d-block">About <span id="indicatorTitle">Indicator</span></span>

                                    <p class="fs-sm indicator-description"></p>
                                </div>
                            </div>

                        </div>


                    </div>

                    <div class="card content-card mt-1">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="mt-2">
                                    <div class="nav nav-pills bg-white device-xs" role="tablist">

                                        <a class="nav-item nav-link flex-fill" id="tab-btn-table" href="#tab-table" data-toggle="pill"
                                           aria-controls="tab-table" aria-selected="false" role="tab" style="text-decoration:none">
                                            <i class="fas fa-list fa-fw"></i>
                                            <div class="d-none d-lg-inline-block py-1">Summary</div>
                                        </a>

                                        <a class="nav-item nav-link flex-fill" id="tab-btn-map" href="#tab-map" data-toggle="pill"
                                           aria-controls="tab-map" aria-selected="false" role="tab" style="text-decoration:none">
                                            <i class="fas fa-map-marker-alt fa-fw"></i>
                                            <div class="d-none d-lg-inline-block py-1">Map</div>
                                        </a>

                                        <a class="nav-item nav-link flex-fill" id="tab-btn-trend" href="#tab-trend" data-toggle="pill"
                                           aria-controls="tab-trend" aria-selected="false" role="tab" style="text-decoration:none">
                                            <i class="fas fa-chart-line fa-fw"></i>
                                            <div class="d-none d-lg-inline-block py-1">Trend</div>
                                        </a>


                                        <a class="nav-item nav-link flex-fill" id="tab-btn-links" href="#tab-links" data-toggle="pill"
                                           aria-controls="tab-links" aria-selected="false" aria-disabled="true" role="tab" style="text-decoration:none">
                                            <i class="fas fa-link fa-fw"></i>
                                            <div class="d-none d-lg-inline-block py-1">Links</div>
                                        </a>

                                    </div>

                                    <div class="tab-content bg-white mb-4" id="tabs-01-content">
                                        
                                        <div class="tab-pane fade show active py-2" id="tab-table" aria-labelledby="tab-btn-table"
                                             role="tabpanel">
                                            <div class="float right mr-1">
                                                <div class="dropdown">
                                                    <button class="btn btn-sm float-right btn-outline-secondary dropdown-toggle"
                                                            type="button" id="dropdownTableYear" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">Select year
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownTableYear">
                                                        
                                                    </div>
                                                </div>

                                                <div class="dropdown">
                                                    <button class="btn btn-sm mr-1 float-right btn-outline-secondary dropdown-toggle"
                                                            type="button" id="dropdownTableGeo" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">Select geography
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownTableGeo">
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <span id="summaryTitle" class="home-label"></span>
                                                <div id="summary-table">
                                                    
                                                </div>

                                            </div>
                                        </div>
                                        
                                        <div class="tab-pane fade py-2" id="tab-map" aria-labelledby="tab-btn-map" role="tabpanel">
                                            <div class="float right mr-1">
                                                <div class="dropdown">
                                                    <button class="btn btn-sm mr-1 float-right btn-outline-secondary dropdown-toggle"
                                                            type="button" id="dropdownMapMeasures" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">Select
                                                        measure
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownMapMeasures">
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <span id="mapTitle" class="home-label"></span>
                                                <div id="map" width=600 height=500
                                                     style="width: 100%; min-height: 450px; margin-bottom: 50px;"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="tab-pane fade py-2" id="tab-trend" aria-labelledby="tab-btn-trend" role="tabpanel">
                                            <div class="dropdown float-right mr-1">
                                                <button class="btn btn-sm float-right btn-outline-secondary dropdown-toggle" type="button"
                                                        id="dropdownTrendMeasures" data-toggle="dropdown" aria-haspopup="true"
                                                        aria-expanded="false">Choose measure</button>
                                                
                                                <button class="btn btn-sm mr-1 float-right btn-outline-secondary btn-show-disparities"
                                                        style="display:inline">Show Dispartites</button>

                                                <div class="dropdown-menu" aria-labelledby="dropdownTrendMeasures">
                                                    
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <span id="trendTitle" class="home-label"></span>
                                                
                                                <div id="trend" style="width: 100%; height: 550px"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="tab-pane fade py-2" id="tab-links" aria-labelledby="tab-btn-links" role="tabpanel">
                                            <div class="dropdown float-right">
                                                <button class="btn btn-sm float-right btn-outline-secondary dropdown-toggle" type="button"
                                                        id="dropdownLinksMeasures" data-toggle="dropdown" aria-haspopup="true"
                                                        aria-expanded="false">Select data to link
                                                </button>
                                                <div class="dropdown-menu" aria-labelledby="dropdownLinksMeasures">
                                                    
                                                </div>
                                            </div>
                                            <div class="mt-4" style="height: 550px; clear: both">
                                                <span id="linksTitle" class="home-label"></span>
                                                
                                                <div id="links" style="width: 100%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-2">

                    <div class="row my-2">
                        <div class="col-md-4">
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-light text-secondary dropdown-toggle"
                                        type="button"
                                        id="downloadDD"
                                        data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false"
                                    ><i class="fa fa-download mr-1"></i>Download Data
                                </button>
                                <div class="dropdown-menu dropdown-menu-right"
                                     aria-labelledby="downloadDD">
                                <a class="dropdown-item buttons-csv btn-outline-info" id="thisView">Current table view</a>
                                <a class="dropdown-item buttons-csv btn-outline-info" id="allData">Full table for this indicator</a>
                                <a class="dropdown-item buttons-csv btn-outline-info" id="rawData">Raw data for this indicator</a>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 ml-auto">
                            <button class="btn float-right btn-sm btn-outline-light text-secondary"
                                    onclick="copyCitation()" id="citeButton"><i class="fas fa-copy mr-1"></i>Copy
                                citation</button>
                            <input type="text" id="citeText" value=""
                                   style="display:inline-block; width:100%; height: 40px; font-size: 14px;"
                                   class="my-2 sr-only">
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 col-xs-12">
                            <div class="btn-toggle">
                                <button class="btn btn-block btn-md btn-outline-light text-secondary"
                                        data-toggle="collapse" data-target="#toggle-target" aria-expanded="false"
                                        aria-controls="toggle-target">
                                    <span class="title"><i class="fas fa-info-circle mr-1"></i>About the Measures</span>
                                </button>
                            </div>

                            <div class="collapse p-2" id="toggle-target" role="navigation">
                                <p class="fs-sm indicator-measures">Insert from `How_Calculated.` Vivamus consequat id
                                    nibh et tempor. Cras
                                    augue enim, iaculis quis purus sit amet, interdum accumsan neque. In blandit varius
                                    blandit. Praesent
                                    vel leo ac urna dapibus faucibus. Donec sed luctus neque. Nulla porta finibus elit,
                                    luctus eleifend
                                    felis ornare vitae. Ut consequat laoreet libero eu venenatis.</p>

                            </div>
                        </div>
                        <div class="col-md-6 col-xs-12">
                            <div class="btn-toggle">
                                <button class="btn btn-block btn-md btn-outline-light text-secondary"
                                        data-toggle="collapse" data-target="#toggle-target-2" aria-expanded="false"
                                        aria-controls="toggle-target-2">
                                    <span class="title"><i class="fas fa-database mr-1"></i>Data sources</span>
                                </button>
                            </div>

                            <div class="collapse p-2" id="toggle-target-2" role="navigation">
                                <p class="fs-sm indicator-sources">Insert from `Sources.` Pellentesque blandit ante vel
                                    augue mattis, lacinia
                                    tincidunt velit feugiat. Class aptent taciti sociosqu ad litora torquent per conubia
                                    nostra, per inceptos
                                    himenaeos. Donec nulla nisl, sollicitudin et volutpat at, finibus ac quam.
                                    Pellentesque faucibus turpis
                                    egestas tellus luctus, nec porttitor diam bibendum. Sed mauris augue, tempus id urna
                                    sit amet, hendrerit
                                    blandit libero. Cras sit amet luctus nunc, nec mattis leo. </p>

                            </div>
                        </div>

                    </div>

                    
                    <div class="row mb-4">
                        <div class="col">
                                <p style="font-size:10px">
                                    <em>* Estimate is based on small numbers so should be interpreted with caution.<br>
                                        ** Estimate is suppressed due to insufficient data.</em>
                                    </p>

                        </div>
                    </div><div class="row">
    <div class="col">
        <h3 class="text-muted fs-sm mt-4 border-bottom">Related:</h3>
    </div>
</div>
<div class="row mb-2" style="height: 350px; overflow-y: scroll;">
    <div class="col-md-4 col-sm-12">
        <div class="fs-sm mt-2" >
            <h4 class="fs-md text-muted"><i class="fas fa-passport text-muted mr-1" aria-hidden="true"></i>Data Stories</h4>
            <div class="fs-xs"><a href="https://nychealth.github.io/EH-dataportal/data-stories/poweroutages/">How power outages affect health</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/violence/">Why violence is a public health issue</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/redlining/">A brief history of redlining</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/housing/">Health, housing, and history</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/heat/">Protecting New Yorkers from extreme heat</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/assaults/">Disparities in violence</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-stories/povasthma/">Why asthma is a social justice issue</a>
            <hr class="my-1"></div>
        </div>
    </div>

    <div class="col-md-4 col-sm-12">
        <div class="fs-sm mt-2">
            <h4 class="fs-md text-muted"><i class="fas fa-map-marked-alt text-muted mr-1" aria-hidden="true"></i>Neighborhood Reports</h4>
            <div class="fs-xs"><a href="https://nychealth.github.io/EH-dataportal/neighborhood-reports/asthma/">Asthma and the Environment</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/neighborhood-reports/climateandhealth/">Climate and Health</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/neighborhood-reports/housing/">Housing and Health in NYC</a>
            <hr class="my-1"></div>
        </div>

        <div class="fs-sm mt-2">
            <h4 class="fs-md text-muted"><i class="fas fa-star text-muted mr-1" aria-hidden="true"></i>Key Topics</h4>
            <div class="fs-xs">
                <a href="https://nychealth.github.io/EH-dataportal/key-topics/social/">Inequality and health inequities</a>
                <hr class="my-1"></div>

        </div>
    </div>

    <div class="col-md-4 col-sm-12">
        <div class="fs-sm mt-2">
            <h4 class="fs-md text-muted"><i class="fas fa-chart-line text-muted mr-1" aria-hidden="true"></i>Data Explorer</h4>
            <div class="fs-xs"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma-triggers/">Asthma triggers at home</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/economic-conditions/">Economic conditions</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-maintenance/">Housing maintenance</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-safety/">Housing safety</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-stability/">Housing stability</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/lead/">Lead poisoning</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mortality/">Mortality</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/social-conditions/">Social conditions</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/violence/">Violence</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/weather-related-illness/">Weather-related illness</a>
            <hr class="my-1"><a href="https://nychealth.github.io/EH-dataportal/data-explorer/worker-health/">Worker health</a>
            <hr class="my-1"></div>
        </div>
    </div>

</div></div>
            </div>

        </div>
    </div>

    

    <div class="modal fade" id="topicModal" tabindex="-1" role="dialog" aria-labelledby="topicModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content mb-2 border-light shadow">
                <div class="modal-header">
                    <h5 class="de-modal-title" id="topicModalLabel">Change topic</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body p-0 ">
                    <style>
    .accordion-group .card {
        background-color: #f2f2f2;
        margin: 0px;
    }

</style>




<div class="row no-gutters">
    <div class="col-12">

        <div class="accordion-group narrow fs-sm" role="tablist" id="accordion-01">

            <div class="card">

               <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-01" data-toggle="collapse"
                    href="#panel-acc-button-01" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-01">
                    <span class="title" role="heading"
                        aria-level="3">Air Quality</span>
                </a></strong> 

                <div class="collapse" id="panel-acc-button-01"
                    role="tabpanel" aria-labelledby="acc-button-01"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/active-design/">Active design</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/air-quality/">Air quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/walking-driving-and-cycling/">Walking, driving, and cycling</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-02" data-toggle="collapse"
                    href="#panel-acc-button-02" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-02">
                    <span class="title" role="heading"
                        aria-level="3">Climate</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-02"
                    role="tabpanel" aria-labelledby="acc-button-02"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/climate/">Climate</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-safety/">Housing safety</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-stability/">Housing stability</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/vector-borne-disease/">Vector-borne disease</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/weather-related-illness/">Weather-related illness</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

               <strong> <a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-03" data-toggle="collapse"
                    href="#panel-acc-button-03" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-03">
                    <span class="title" role="heading"
                        aria-level="3">Housing</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-03"
                    role="tabpanel" aria-labelledby="acc-button-03"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma-triggers/">Asthma triggers at home</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/bed-bugs/">Bed bugs</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancer/">Cancer</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/carbon-monoxide-incidents/">Carbon monoxide</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cigarette-smoke/">Cigarette smoke</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cockroaches/">Cockroaches</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/economic-conditions/">Economic conditions</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/falls-among-older-adults/">Falls among older adults</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-maintenance/">Housing maintenance</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-safety/">Housing safety</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-stability/">Housing stability</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/lead/">Lead poisoning</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mice-and-rats/">Mice and rats</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/social-conditions/">Social conditions</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-04" data-toggle="collapse"
                    href="#panel-acc-button-04" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-04">
                    <span class="title" role="heading"
                        aria-level="3">Health equity</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-04"
                    role="tabpanel" aria-labelledby="acc-button-04"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma-triggers/">Asthma triggers at home</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/economic-conditions/">Economic conditions</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-care/">Health care</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-maintenance/">Housing maintenance</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-safety/">Housing safety</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-stability/">Housing stability</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/lead/">Lead poisoning</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mortality/">Mortality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/social-conditions/">Social conditions</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/violence/">Violence</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/weather-related-illness/">Weather-related illness</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/worker-health/">Worker health</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-05" data-toggle="collapse"
                    href="#panel-acc-button-05" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-05">
                    <span class="title" role="heading"
                        aria-level="3">Active design / Transportation</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-05"
                    role="tabpanel" aria-labelledby="acc-button-05"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/active-design/">Active design</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/air-quality/">Air quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/physical-activity/">Physical activity</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/transportation-related-injuries/">Transportation-related injuries</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/walking-driving-and-cycling/">Walking, driving, and cycling</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-06" data-toggle="collapse"
                    href="#panel-acc-button-06" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-06">
                    <span class="title" role="heading"
                        aria-level="3">Health outcomes</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-06"
                    role="tabpanel" aria-labelledby="acc-button-06"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-defects/">Birth defects</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-outcomes/">Birth outcomes</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancer/">Cancer</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancers-in-children/">Cancers in children</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/falls-among-older-adults/">Falls among older adults</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mortality/">Mortality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/overweight/">Overweight</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/transportation-related-injuries/">Transportation-related injuries</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/vector-borne-disease/">Vector-borne disease</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/violence/">Violence</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/weather-related-illness/">Weather-related illness</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/worker-health/">Worker health</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-07" data-toggle="collapse"
                    href="#panel-acc-button-07" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-07">
                    <span class="title" role="heading"
                        aria-level="3">Child health</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-07"
                    role="tabpanel" aria-labelledby="acc-button-07"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/air-quality/">Air quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-defects/">Birth defects</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-outcomes/">Birth outcomes</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancers-in-children/">Cancers in children</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/carbon-monoxide-incidents/">Carbon monoxide</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cigarette-smoke/">Cigarette smoke</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/lead/">Lead poisoning</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-08" data-toggle="collapse"
                    href="#panel-acc-button-08" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-08">
                    <span class="title" role="heading"
                        aria-level="3">Pests and pesticides</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-08"
                    role="tabpanel" aria-labelledby="acc-button-08"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/bed-bugs/">Bed bugs</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cockroaches/">Cockroaches</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mice-and-rats/">Mice and rats</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/pesticides/">Pesticides</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/vector-borne-disease/">Vector-borne disease</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-09" data-toggle="collapse"
                    href="#panel-acc-button-09" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-09">
                    <span class="title" role="heading"
                        aria-level="3">Food and drink</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-09"
                    role="tabpanel" aria-labelledby="acc-button-09"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/healthy-eating/">Healthy eating</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/alcohol-use/">Alcohol access and use</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/drinking-water-quality/">Drinking water quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/restaurant-food-safety/">Restaurant food safety</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

            
            <hr class="my-1">
            
            

            <div class="card">

                <strong><a class="btn btn-outline-light btn-block collapse collapsed"
                    id="acc-button-10" data-toggle="collapse"
                    href="#panel-acc-button-10" role="tab"
                    aria-expanded="false"
                    aria-controls="panel-acc-button-10">
                    <span class="title" role="heading"
                        aria-level="3">All topics</span>
                </a></strong>

                <div class="collapse" id="panel-acc-button-10"
                    role="tabpanel" aria-labelledby="acc-button-10"
                    data-parent="#accordion-01">

                    <div class="card-body bg-white">
                        <ul>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/healthy-eating/">Healthy eating</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/active-design/">Active design</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/air-quality/">Air quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/alcohol-use/">Alcohol access and use</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/all-data/">All data sets</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma/">Asthma</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/asthma-triggers/">Asthma triggers at home</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/bed-bugs/">Bed bugs</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-defects/">Birth defects</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/birth-outcomes/">Birth outcomes</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancer/">Cancer</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cancers-in-children/">Cancers in children</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/carbon-monoxide-incidents/">Carbon monoxide</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cigarette-smoke/">Cigarette smoke</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/climate/">Climate</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/cockroaches/">Cockroaches</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/drinking-water-quality/">Drinking water quality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/economic-conditions/">Economic conditions</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/falls-among-older-adults/">Falls among older adults</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-care/">Health care</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/health-impacts-of-air-pollution/">Health impacts of air pollution</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-maintenance/">Housing maintenance</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-safety/">Housing safety</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/housing-stability/">Housing stability</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/lead/">Lead poisoning</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mice-and-rats/">Mice and rats</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/mortality/">Mortality</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/overweight/">Overweight</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/pesticides/">Pesticides</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/physical-activity/">Physical activity</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/restaurant-food-safety/">Restaurant food safety</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/social-conditions/">Social conditions</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/transportation-related-injuries/">Transportation-related injuries</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/vector-borne-disease/">Vector-borne disease</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/violence/">Violence</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/walking-driving-and-cycling/">Walking, driving, and cycling</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/weather-related-illness/">Weather-related illness</a>
                                </li>
                            
                                <li><a href="https://nychealth.github.io/EH-dataportal/data-explorer/worker-health/">Worker health</a>
                                </li>
                            
                            </ul>
                    </div>

                </div>
                

            </div>
            

        </div>
        
    </div>
</div>


<script>
    var subtopic_indicators = {"active-design":{"IndicatorID":[2390,2181,2158,2157,2143,2388,2391,2389,2133],"subtopic_name":"Active design"},"air-quality":{"IndicatorID":[92,57,55,2024,2023,2028,2025,2027,2026],"subtopic_name":"Air quality"},"alcohol-use":{"IndicatorID":[2049,2057,2050,2051,2056,2055],"subtopic_name":"Alcohol access and use"},"asthma":{"IndicatorID":[2380,2384,2048,2378,2379,2383,2382,2387,84,2381,2386,18,2392,2147,2149,2339],"subtopic_name":"Asthma"},"asthma-triggers":{"IndicatorID":[2101,25,2393,2394,107,48],"subtopic_name":"Asthma triggers at home"},"bed-bugs":{"IndicatorID":[2030],"subtopic_name":"Bed bugs"},"birth-defects":{"IndicatorID":[26,30,31,36,37,33,28,32,35,27,101,29,34],"subtopic_name":"Birth defects"},"birth-outcomes":{"IndicatorID":[5,4,6,7,8,1,9,3,2],"subtopic_name":"Birth outcomes"},"cancer":{"IndicatorID":[74,2096,66,60,770,2077,2087,2088,73,2089,63,2090,2095,71,2091,64,690],"subtopic_name":"Cancer"},"cancers-in-children":{"IndicatorID":[2037,2035,2033,2031,2039],"subtopic_name":"Cancers in children"},"carbon-monoxide-incidents":{"IndicatorID":[38,2168,2398,2405,2406],"subtopic_name":"Carbon monoxide"},"cigarette-smoke":{"IndicatorID":[2338,2020,2017,2019,2021,25],"subtopic_name":"Cigarette smoke"},"climate":{"IndicatorID":[2141,2143,2084,2191,2411,2155,2104,2185,2377],"subtopic_name":"Climate"},"cockroaches":{"IndicatorID":[22,2393,107],"subtopic_name":"Cockroaches"},"drinking-water-quality":{"IndicatorID":[2207,2044,2043,2041],"subtopic_name":"Drinking water quality"},"economic-conditions":{"IndicatorID":[103,2176,2337,2132,2317,2073,17,2336,15,2365],"subtopic_name":"Economic conditions"},"falls-among-older-adults":{"IndicatorID":[2135,2136,2408,2409,2403,2188],"subtopic_name":"Falls among older adults"},"health-care":{"IndicatorID":[2151,2132,2401,2232],"subtopic_name":"Health care"},"health-impacts-of-air-pollution":{"IndicatorID":[2122,2124,2121,2117,2120,2108,2119],"subtopic_name":"Health impacts of air pollution"},"healthy-eating":{"IndicatorID":[2097,2389,2098],"subtopic_name":"Healthy eating"},"housing-maintenance":{"IndicatorID":[2396,2395,46,47,45,40,42,41,2399,2179],"subtopic_name":"Housing maintenance"},"housing-safety":{"IndicatorID":[2188,2185,2377],"subtopic_name":"Housing safety"},"housing-stability":{"IndicatorID":[2365,15,17,2336],"subtopic_name":"Housing stability"},"lead":{"IndicatorID":[2189,2184,2216,2176,2209,41,16],"subtopic_name":"Lead poisoning"},"mice-and-rats":{"IndicatorID":[2394,2105,24,48],"subtopic_name":"Mice and rats"},"mortality":{"IndicatorID":[5,6,8,2322],"subtopic_name":"Mortality"},"overweight":{"IndicatorID":[2063,2064,2061,2062],"subtopic_name":"Overweight"},"pesticides":{"IndicatorID":[2235,91,100,2312,96,94,93,99,97,98,102,2366,2364,2367,2368,2369,2374,2370],"subtopic_name":"Pesticides"},"physical-activity":{"IndicatorID":[2060,2058,2173,2059,2172],"subtopic_name":"Physical activity"},"restaurant-food-safety":{"IndicatorID":[2065],"subtopic_name":"Restaurant food safety"},"social-conditions":{"IndicatorID":[2325,2145,14,2334,2317,2335,2146,2323],"subtopic_name":"Social conditions"},"transportation-related-injuries":{"IndicatorID":[2092,2086,2094,2093],"subtopic_name":"Transportation-related injuries"},"vector-borne-disease":{"IndicatorID":[2218,2340],"subtopic_name":"Vector-borne disease"},"violence":{"IndicatorID":[2400,2375],"subtopic_name":"Violence"},"walking-driving-and-cycling":{"IndicatorID":[2133,2172,2058,2173,2059,2236,2237,2238,2113,2114,2112],"subtopic_name":"Walking, driving, and cycling"},"weather-related-illness":{"IndicatorID":[2376,2175,2174,2410,2084,2074,2075,2076,2191,2411],"subtopic_name":"Weather-related illness"},"worker-health":{"IndicatorID":[2209,2211,2208,2210,2214,2239,2215],"subtopic_name":"Worker health"}};
    

    var destination = document.getElementById('indicatorNames')    

    function changeKT(x) {
        console.log(x)
        const all = document.querySelectorAll('.dumps')
        all.forEach((dump) => {
            dump.classList.remove('show')
            dump.classList.add('hide')
        });
        const chosen = 'output'+x
        console.log('chosen: ' + chosen)
        document.getElementById(chosen).classList.remove('hide')

        const KTs = document.querySelectorAll('.kt')
        KTs.forEach((kt) => {
            kt.classList.remove('active')
        });

        const link = 'kt'+x
        document.getElementById(link).classList.add('active')
    }

</script>
                </div>
            </div>
        </div>
    </div>


    
    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aboutModalLabel">About Health care</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Health care is a valuable tool to stay healthy.</p>
<p>Health insurance coverage is associated with many health benefits. People with health insurance are more likely to have a regular doctor, receive preventive care services, better manage chronic health conditions, have longer life expectancy, and more.</p>
<p>However, not all New Yorkers can access appropriate amounts of care. Many New Yorkers remain uninsured. People without access to appropriate health care don&rsquo;t receive the care they need to stay healthy. They may postpone care, be unable to afford medication or treatment, and become sicker and die earlier than people with good health insurance and good health care.</p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/arquero@latest"></script>

    
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.1.0/css/buttons.dataTables.min.css">

    
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"
        integrity="sha512-oaT4uVdyleJGVHZqklOx2Bb8WhOTBW3iCXRtgk3+YutYmFx0jSs97UR3/+r1vh1Isyb3GOGjFonLbS6LFiiEVA=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"
        integrity="sha512-guWTt6syHB4T9gdPdw8W1iQUGqqricRt5VRjnjgMPpOhUhwOsxmXpk2SImqfcPgsiroK00z/loICebflVeJvqg=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"
        integrity="sha512-vv3EN6dNaQeEWDcxrKPFYSFba/kgm//IUnvLPMPadaUf5+ylZyx4cKxuc4HdBf0PPAlM7560DV63ZcolRJFPqA=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/rowgroup/1.1.4/js/dataTables.rowGroup.min.js"></script>

    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    
    <script src="https://d3js.org/d3.v5.min.js"></script>

    
    <script src="https://nychealth.github.io/EH-dataportal//js/data-explorer/summary.js"></script>
    <script src="https://nychealth.github.io/EH-dataportal//js/data-explorer/map.js"></script>
    <script src="https://nychealth.github.io/EH-dataportal//js/data-explorer/trend.js"></script>
    <script src="https://nychealth.github.io/EH-dataportal//js/data-explorer/links.js"></script>
    <script src="https://nychealth.github.io/EH-dataportal//js/data-explorer/disparities.js"></script>

    <script>

        

        let indicators = []; 
        let defaultIndicatorId;
        let selectedSummaryYears = [];
        let selectedSummaryGeography = [];
        let aboutMeasures;
        let dataSources;

        let measureAbout = `N/A`;
        let measureSources = `N/A`;
        let geoTable;
        let aqData;
        let joinedAqData;

        let fullDataTableObjects;
        let fullDataMapObjects;
        let fullDataTrendObjects;
        let fullDataLinksObjects;
        let joinedDataLinksObjects;
        let disparitiyData; 

        let indicator;
        let indicatorName;
        let indicatorDesc;
        let indicatorShortName;
        let indicatorMeasures;
        let indicatorId;
        let primaryIndicatorName;
        let secondaryIndicatorName;

        let defaultTrendMetadata = [];
        let defaultTrendAbout;
        let defaultTrendSources;
        let defaultMapMetadata = [];
        let defaultMapAbout;
        let defaultMapSources;
        let defaultLinksMetadata = [];
        let defaultLinkMeasureTimes = [];
        let defaultLinksAbout;
        let defaultLinksSources;

        let selectedMapMeasure;
        let selectedTrendMeasure;
        let selectedLinksMeasure;
        let selectedMapAbout;
        let selectedMapSources;
        let selectedTrendAbout;
        let selectedTrendSources;
        let selectedLinksAbout;
        let selectedLinksSources;
        let selectedlinksSecondaryMeasureTime;

        let primaryMeasureMetadata;
        let secondaryMeasureMetadata;

        let filteredMapData;
        let filteredTrendData;
        let filteredLinksData;

        let mapMeasures = [];
        let trendMeasures = [];
        let linksMeasures = [];

        let tabTable;
        let tabMap;
        let tabTrend;
        let tabLinks;

        let showTable;
        let showMap;
        let showTrend;
        let showLinks;

        
        let currentHash;
        let state;

        

        
        let tabTrendDropDown = document.querySelector('#tab-trend .dropdown');

        
        let btnShowDisparities = document.querySelector('.btn-show-disparities');

        const url = new URL(window.location);

        const updateChartPlotSize = () => {
            setTimeout(() => {
                window.dispatchEvent(new Event('resize'));
            }, 200)

        }

        

        let hashchange = new Event('hashchange');

        

        window.onpopstate = function (event) {

            console.log("** pop **");
            console.log("state: ", window.history.state);
            console.log("event: ", event);

            const new_url = new URL(window.location);
            let new_indicatorId = parseFloat(new_url.searchParams.get('id'));

            console.log("new_indicatorId [pop]", new_indicatorId);

            if (new_indicatorId != indicatorId) {

                loadIndicator(new_indicatorId, true)

            }
        };

        window.addEventListener("hashchange", () => {

            const hash = window.location.hash.replace('#', "");
            console.log("< hashchange > hash: ", hash);

            switch (hash) {

                

                case 'display=summary':
                case 'tab-table':
                    console.log("< hashchange > summary");
                    currentHash = 'display=summary';
                    $('#tab-btn-table').tab('show');
                    showTable();
                    break;

                case 'display=map':
                case 'tab-map':
                    console.log("< hashchange > map");
                    currentHash = 'display=map';
                    $('#tab-btn-map').tab('show');
                    showMap();
                    break;

                case 'display=trend':
                case 'tab-trend':
                    console.log("< hashchange > trend");
                    currentHash = 'display=trend';
                    $('#tab-btn-trend').tab('show');
                    showTrend();
                    break;

                case 'display=links':
                case 'tab-links':
                    console.log("< hashchange > links");
                    currentHash = 'display=links';
                    $('#tab-btn-links').tab('show');
                    showLinks();
                    break;

                default:
                    console.log("< hashchange > default");
                    currentHash = 'display=summary';
                    
                    
                    
                    break;
            }

            state = window.history.state;

            console.log(">> state [hashchange]", state);

        });


        document.addEventListener("DOMContentLoaded", () => {

            tabTable = document.querySelector('#tab-btn-table');
            tabMap = document.querySelector('#tab-btn-map');
            tabTrend = document.querySelector('#tab-btn-trend');
            tabLinks = document.querySelector('#tab-btn-links');

            aboutMeasures = document.querySelector('.indicator-measures');
            dataSources = document.querySelector('.indicator-sources');

        });

        function reveal() {
            document.getElementById('truncate').classList.toggle('hide');
            document.getElementById('full').classList.toggle('show');
            document.getElementById('contenttoggle').innerHTML = `Show less... <i class="fas fa-caret-square-up" aria-hidden="true"></i>`;
        }


        

        const assignGeoRank = (GeoType) => {
            switch (GeoType) {
                case 'Citywide':
                    return 0;
                case 'Borough':
                    return 1;
                case 'NYCKIDS':
                    return 2;
                case 'UHF34':
                    return 3;
                case 'UHF42':
                    return 4;
                case 'Subboro':
                    return 5;
                case 'CD':
                    return 6;
                case 'NTA':
                    return 7;
            }
        }


        
        
        

        fetch(data_repo + "/" + data_branch + '/indicators/indicators.json')
            .then(response => response.json())
            .then(async data => {

                indicators = data;

                const paramId = url.searchParams.get('id') !== null ? parseInt(url.searchParams.get('id')) : false;

                const renderIndicatorDropdown = () => {

                    const indicatorDropdown = document.getElementById("indicator-dropdown");
                    let this_indicatorName;
                    let header;

                        header = ``;
                        indicatorDropdown.innerHTML += header.length ? `<div class="dropdown-title"><strong>${header}</strong></div>`: '';

                        defaultIndicatorId = 2151

                            indicator = indicators.find(indicator => indicator.IndicatorID === 2151);
                            this_indicatorName = indicator?.IndicatorName ? indicator.IndicatorName : 'N/A';
                            indicatorDropdown.innerHTML += `<button class="indicator-dropdown-item dropdown-item" onclick="loadIndicator( 2151 )" data-indicator-id=2151>${this_indicatorName}</button>`

                            indicator = indicators.find(indicator => indicator.IndicatorID === 2132);
                            this_indicatorName = indicator?.IndicatorName ? indicator.IndicatorName : 'N/A';
                            indicatorDropdown.innerHTML += `<button class="indicator-dropdown-item dropdown-item" onclick="loadIndicator( 2132 )" data-indicator-id=2132>${this_indicatorName}</button>`

                            indicator = indicators.find(indicator => indicator.IndicatorID === 2401);
                            this_indicatorName = indicator?.IndicatorName ? indicator.IndicatorName : 'N/A';
                            indicatorDropdown.innerHTML += `<button class="indicator-dropdown-item dropdown-item" onclick="loadIndicator( 2401 )" data-indicator-id=2401>${this_indicatorName}</button>`

                            indicator = indicators.find(indicator => indicator.IndicatorID === 2232);
                            this_indicatorName = indicator?.IndicatorName ? indicator.IndicatorName : 'N/A';
                            indicatorDropdown.innerHTML += `<button class="indicator-dropdown-item dropdown-item" onclick="loadIndicator( 2232 )" data-indicator-id=2232>${this_indicatorName}</button>`}

                renderIndicatorDropdown()

                // calling loadIndicator calls loadData, etc, and eventually renderMeasures. Because all
                //  of this depends on the global "indicator" object, we call loadIndicator here

                if (paramId) {
                    await loadIndicator(paramId)
                } else {
                    await loadIndicator()
                }

            })
            .catch(error => console.log(error));


        // ======================================================================= //
        // data loading and manipulation functions
        // ======================================================================= //

        // I reversed the order of these function declarations to make the process
        //  of data creation easier to understand

        // ----------------------------------------------------------------------- //
        // function to load indicator metadata
        // ----------------------------------------------------------------------- //

        const loadIndicator = (this_indicatorId, dont_add_to_history) => {

            console.log("** loadIndicator");

            currentHash = window.location.hash;
            console.log("currentHash [loadIndicator]", currentHash);

            console.log("this_indicatorId", this_indicatorId);
            console.log("window.history.state", window.history.state);

            // if indicatorId isn't given, use the first indicator from the dropdown list
            //  (which is populated by Hugo reading the content frontmatter).

            const firstIndicatorId = document.querySelectorAll('#indicator-dropdown button')[0].getAttribute('data-indicator-id');

            indicatorId = this_indicatorId ? parseFloat(this_indicatorId) : parseFloat(firstIndicatorId);

            // remove active class from every list element
            $(".indicator-dropdown-item").removeClass("active");
            $(".indicator-dropdown-item").attr('aria-selected', false);

            // get the list element for this indicator
            const thisIndicatorEl = document.querySelector(`button[data-indicator-id='${indicatorId}']`)

            // set this element as active & selected
            $(thisIndicatorEl).addClass("active");
            $(thisIndicatorEl).attr('aria-selected', true);

            // indicatorId comes in as  a string, so "find" uses '==' instead of '==='

            indicator = indicators.find(indicator => indicator.IndicatorID == indicatorId);
            indicatorName = indicator?.IndicatorName ? indicator.IndicatorName : '';
            indicatorDesc = indicator?.IndicatorDescription ? indicator.IndicatorDescription : '';
            indicatorShortName = indicator?.IndicatorShortname ? indicator.IndicatorShortname : indicatorName;
            indicatorMeasures = indicator?.Measures;

            //create Citation

            createCitation(); // re-runs on updating Indicator

            // send Indicator Title to vis headers

            document.getElementById('summaryTitle').innerHTML = indicatorName;
            document.getElementById('mapTitle').innerHTML     = indicatorName;
            document.getElementById('trendTitle').innerHTML   = indicatorName;

            // reset selected measure flags

            selectedMapMeasure = false;
            selectedTrendMeasure = false;
            selectedLinksMeasure = false;

            // if dont_add_to_history is true, then don't push the state
            // if dont_add_to_history is false, or not set, push the state
            // this prevents loadIndicator from setting new history entries when it's called
            //  on a popstate event, i.e. when the user is traversing the history stack

            // dont_add_to_history catches the pop state case, state.id != indicatorId catches the location change case
            // we don't want to add to the history stack if we've landed on this page by way of the history stack

            url.searchParams.set('id', parseFloat(indicatorId));

            if (!dont_add_to_history && (window.history.state === null || state === null || window.history.state.id != indicatorId)) {

                console.log("++++ add to history");

                console.log("indicatorId [1]:", url.searchParams.get('id'))

                if (!url.hash) {

                    console.log("- no hash");
                    console.log("state [pre]: ", window.history.state);
                    console.log("indicatorId [2]:", url.searchParams.get('id'))

                    // if loadIndicator is being called without a hash (like when a topic page is loaded), then show the first ID and summary

                    url.hash = "display=summary";
                    window.history.replaceState({ id: indicatorId, hash: url.hash}, '', url);

                    console.log("state [post]: ", window.history.state);

                } else {

                    console.log("# hash");
                    console.log("state [pre]: ", window.history.state);
                    console.log("indicatorId [3]:", url.searchParams.get('id'))

                    url.hash = currentHash;
                    window.history.pushState({ id: indicatorId, hash: url.hash }, '', url);

                    console.log("state [post]: ", window.history.state);

                }

            } else {

                console.log("---- don't add to history");
                console.log("state: ", window.history.state);
                console.log("indicatorId [4]:", url.searchParams.get('id'))

            }

            // call data loading function

            const indicatorTitle = document.getElementById('dropdownIndicator')

            indicatorTitle.innerHTML = indicatorName

            loadData(indicatorId)
        }

        // ----------------------------------------------------------------------- //
        // function to Load indicator data and create Arquero data frame
        // ----------------------------------------------------------------------- //

        const loadData = (this_indicatorId) => {

            fetch(data_repo + "/" + data_branch + `/indicators/data/${this_indicatorId}.json`)
            .then(response => response.json())
            .then(async data => {

                // call the geo file loading function

                loadGeo();

                ful = aq.from(data)
                    .derive({ "GeoRank": aq.escape( d => assignGeoRank(d.GeoType))})
                    .groupby("Time", "GeoType", "GeoID", "GeoRank")


                aqData = ful
                    .groupby("Time", "GeoType", "GeoID")
                    .orderby(aq.desc('Time'), 'GeoRank')
            })
        }

        // ----------------------------------------------------------------------- //
        // function to load geographic data
        // ----------------------------------------------------------------------- //

        const loadGeo = () => {

            const geoUrl = data_repo + "/" + data_branch + `/geography/GeoLookup.csv`; // col named "GeoType"

            aq.loadCSV(geoUrl)
                .then(data => {

                    geoTable = data.select(aq.not('Lat', 'Long'));

                    // call the data-to-geo joining function

                    joinData();

            });
        }

        // ----------------------------------------------------------------------- //
        // function to join indicator data and geo data
        // ----------------------------------------------------------------------- //

        const joinData = () => {

            // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //
            // get metadata fields
            // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //

            // flatten MeasureID + TimeDescription

            let availableTimes = [];

            // create table column header with display type

            let measurementDisplay = [];

            indicatorMeasures.map(

                measure => {

                    let aqAvailableTimes =
                        aq.from(measure.AvailableTimes)
                        .derive({MeasureID: `${measure.MeasureID}`})

                    availableTimes.push(aqAvailableTimes);

                    let aqMeasurementDisplay =
                        aq.table(
                        {
                            MeasureID: [measure.MeasureID],
                            MeasurementType: [measure.MeasurementType],
                            DisplayType: [measure.DisplayType]
                        })

                    measurementDisplay.push(aqMeasurementDisplay);

                }
            )

            // bind rows of Arquero tables in arrays

            let aqMeasureIdTimes     = availableTimes.reduce((a, b) => a.concat(b))
            let aqMeasurementDisplay = measurementDisplay.reduce((a, b) => a.concat(b))

            // foundational joined dataset

            joinedAqData = aqData
                .join_left(geoTable, [["GeoID", "GeoType"], ["GeoID", "GeoType"]])
                .rename({'Name': 'Geography'})
                .join(aqMeasureIdTimes, [["MeasureID", "Time"], ["MeasureID", "TimeDescription"]])
                .select(
                    "GeoID",
                    "GeoType",
                    "GeoRank",
                    "Geography",
                    "MeasureID",
                    "Time",
                    "Value",
                    "DisplayValue",
                    "CI",
                    "start_period",
                    "end_period"
                )
                .orderby(aq.desc('end_period'), aq.desc('GeoRank'))
                .reify()

            // data for summary table

            fullDataTableObjects = joinedAqData
                .join_left(aqMeasurementDisplay, "MeasureID")
                .derive({
                    MeasurementDisplay: d => op.trim(op.join([d.MeasurementType, d.DisplayType], " ")),
                    DisplayCI: d => op.trim(op.join([d.DisplayValue, d.CI], " "))
                })
                .derive({ DisplayCI: d => op.replace(d.DisplayCI, /^$/, "-") }) // replace missing with "-"
                .select(aq.not("start_period", "end_period"))
                .objects()

            // data for map

            fullDataMapObjects = joinedAqData
                .filter(d => !op.match(d.GeoType, /Citywide|Borough/)) // remove Citywide and Boro
                .impute({ Value: () => NaN })
                .objects()

            // map for trend chart

            fullDataTrendObjects = joinedAqData
                .filter(d => op.match(d.GeoType, /Citywide|Borough/)) // keep only Citywide and Boro
                .objects()

            // data for links & disparities chart

            fullDataLinksObjects = joinedAqData
                .filter(d => !op.match(d.GeoType, /Citywide|Borough/)) // remove Citywide and Boro
                .objects()

            // call the measure rendering etc. function

            renderMeasures();

        }


        // ----------------------------------------------------------------------- //
        // function to create data and metadata for links chart
        // ----------------------------------------------------------------------- //

        const filterSecondaryIndicatorMeasure = async (primaryMeasureId, secondaryMeasureId) => {

            // filter links data to keep primary measure

            const primaryMeasureTimesDataObjects = fullDataLinksObjects.filter(
                d => d.MeasureID === primaryMeasureId
            );

            // get most recent time period for primary measure

            const aqFilteredPrimaryMeasureTimesData = aq.from(fullDataLinksObjects)

                // most recent period in the data
                .filter(`d => d.MeasureID === ${primaryMeasureId}`)

                // most recent period in the data
                .filter(d => d.end_period === op.max(d.end_period))

            const mostRecentPrimaryMeasureStartTime = aqFilteredPrimaryMeasureTimesData.array("start_period")[0]
            const mostRecentPrimaryMeasureEndTime   = aqFilteredPrimaryMeasureTimesData.array("end_period")[0]
            const mostRecentPrimaryMeasureTime      = aqFilteredPrimaryMeasureTimesData.array("Time")[0]
            const primaryMeasureGeoRanks            = [...new Set(aqFilteredPrimaryMeasureTimesData.array("GeoRank"))]

            // get metadata for the selected primary measure, assign to global variable
            // indicatorMeasures created in loadIndicator

            primaryMeasureMetadata = linksMeasures.filter(
                measure => measure.MeasureID === primaryMeasureId
            )

            // if no secondary measure ID is given, set it to the first in the primary measure's links list

            if (typeof secondaryMeasureId == "undefined") {
                secondaryMeasureId = primaryMeasureMetadata[0].VisOptions[0].Links[0].MeasureID;
            }

            

            const secondaryIndicator = indicators.filter(
                indicator => indicator.Measures.some(
                    measure => measure.MeasureID === secondaryMeasureId
                )
            )

            

            const secondaryIndicatorId = secondaryIndicator[0].IndicatorID

            

            secondaryMeasureMetadata =
                secondaryIndicator[0].Measures.filter(
                measure => measure.MeasureID === secondaryMeasureId
            )

            

            const secondaryMeasureTimes = secondaryMeasureMetadata[0].AvailableTimes;
            const aqSecondaryMeasureTimes = aq.from(secondaryMeasureTimes);


            
            
            

            await fetch(data_repo + "/" + data_branch + `/indicators/data/${secondaryIndicatorId}.json`)
                .then(response => response.json())
                .then(async data => {

                    

                    const filteredSecondaryMeasureData = data.filter(d => d.MeasureID === secondaryMeasureId)

                    

                    const aqFilteredSecondaryMeasureTimesData = aq.from(filteredSecondaryMeasureData)
                        .join(
                            geoTable,
                            [["GeoID", "GeoType"], ["GeoID", "GeoType"]]
                        )
                        .derive({ "GeoRank": aq.escape( d => assignGeoRank(d.GeoType))})

                        
                        .filter(`d => op.includes([${primaryMeasureGeoRanks}], d.GeoRank)`)
                        .rename({'Name': 'Geography'})
                        .join(
                            aqSecondaryMeasureTimes,
                            ["Time", "TimeDescription"]
                        )
                        .select(aq.not("TimeDescription"))

                    

                    const filteredSecondaryMeasureTimesDataObjects = aqFilteredSecondaryMeasureTimesData.objects();

                    

                    const closestSecondaryTime = filteredSecondaryMeasureTimesDataObjects.reduce((prev, curr) => {

                        return (Math.abs(curr.end_period - mostRecentPrimaryMeasureEndTime) < Math.abs(prev.end_period - mostRecentPrimaryMeasureEndTime) ? curr : prev);

                    });

                    

                    const aqClosestSecondaryData = aqFilteredSecondaryMeasureTimesData

                        
                        .filter(`d => d.end_period === ${closestSecondaryTime.end_period}`)

                        
                        .filter(d => d.GeoRank === op.max(d.GeoRank))

                        
                        
                        .filter(d => d.start_period === op.min(d.start_period))

                    

                    const aqJoinedPrimarySecondaryData = aqFilteredPrimaryMeasureTimesData
                        .join(
                            aqClosestSecondaryData,
                            [["GeoID", "GeoType"], ["GeoID", "GeoType"]]
                        )

                    

                    joinedDataLinksObjects = await aqJoinedPrimarySecondaryData.objects();

                })
        }


        
        
        

        const handleYearFilter = (el) => {
            el.addEventListener('change', (e) => {
                if (e.target.checked) {
                    selectedSummaryYears = [e.target.value]
                }
                renderTable()
            })
        }

        const handleGeoFilter = (el) => {

            el.addEventListener('change', (e) => {

                if (e.target.checked) {
                    selectedSummaryGeography.push(e.target.value)
                } else {
                    selectedSummaryGeography = selectedSummaryGeography.filter(item => item !== e.target.value);
                }

                

                if (selectedSummaryGeography.length > 0) {
                    renderTable()

                } else {
                    document.querySelector("#tableID").innerHTML = '';
                }
            })
        }

        const handleToggle = () => {

            $('body').off('click', '#summary-table tr.group td');
            $('body').on('click', '#summary-table tr.group td', (e) => {

                const td = $(e.target);
                const tr = td.parent();
                const group = td.data('group');
                const groupLevel = td.data('group-level');

                const handleGroupToggle = () => {

                    const subGroupToggle = $(`td[data-year="${group}"][data-group-level="1"]`);
                    const subGroupRow = $(`tr[data-year="${group}"]`);

                    if (subGroupToggle.css('display') === 'none') {
                        subGroupToggle.removeClass('hidden');
                        subGroupRow.removeClass('hidden');
                        td.removeClass('hidden');
                        subGroupToggle.show();
                        subGroupRow.show();
                    } else {
                        subGroupToggle.addClass('hidden');
                        subGroupRow.addClass('hidden');
                        td.addClass('hidden');
                        subGroupToggle.hide();
                        subGroupRow.hide();
                    }
                }

                const handleSubGroupToggle = () => {

                    const subDataGroup = tr.next(`tr`).data(`group`);
                    const parentDataGroup = subDataGroup.split('-')[0];
                    const subGroupRow = $(`tr[data-group="${subDataGroup}"]`);
                    const parentGroupToggle = $(`td[data-group="${parentDataGroup}"]`);

                    if (subGroupRow.css('display') == 'none')  {
                        subGroupRow.show();
                        td.removeClass('hidden');
                        subGroupRow.removeClass('hidden');
                        parentGroupToggle.removeClass('hidden');
                    } else {
                        subGroupRow.hide();
                        td.addClass('hidden');
                        subGroupRow.addClass('hidden');
                    }
                }

                if (groupLevel === 0) {
                    handleGroupToggle();
                } else {
                    handleSubGroupToggle();
                }

            });
        }


        
        
        

        

        const renderTitleDescription = (title, desc) => {

            const indicatorTitle = document.getElementById('indicatorTitle');
            const indicatorDescription = document.querySelector('.indicator-description');
            indicatorTitle.innerHTML = title;
            indicatorDescription.innerHTML = `${desc}`;
        }

        

        const renderAboutSources = (about, sources) => {

            aboutMeasures.innerHTML = about;
            dataSources.innerHTML = sources;
        }


        
        
        

        

        const updateMapData = (e) => {

            

            

            const measureId = parseInt(e.target.dataset.measureId);

            

            const time = e.target.dataset.time;

            

            
            $('.mapbutton').removeClass("active");
            $('.mapbutton').attr('aria-selected', false);

            
            $(e.target).addClass("active");
            $(e.target).attr('aria-selected', true);


            

            const measureMetadata = mapMeasures.filter(m => m.MeasureID == measureId);
            const measurementType = measureMetadata[0].MeasurementType;
            const about           = measureMetadata[0].how_calculated;
            const sources         = measureMetadata[0].Sources;
            const display         = measureMetadata[0].DisplayType;


            

            

            selectedMapAbout   =
                `<h6>${indicatorName} - ${measurementType}</h6>
                <p>${about}</p>`;

            selectedMapSources =
                `<h6>${indicatorName} - ${measurementType}</h6>
                <p>${sources}</p>`;

            

            renderAboutSources(selectedMapAbout, selectedMapSources);


            

            

            let mapMeasureData =
                fullDataMapObjects.filter(
                    obj => obj.MeasureID === measureId &&
                    obj.Time === time
                );

            

            let maxGeoRank = Math.max(mapMeasureData[0].GeoRank);
            filteredMapData = mapMeasureData.filter(obj => obj.GeoRank === maxGeoRank)

            

            renderMap(filteredMapData, measureMetadata);

            updateChartPlotSize();

            

            selectedMapMeasure = true;

        }


        

        const updateTrendData = (e) => {

            console.log("updateTrendData");

            

            

            const measureId = parseInt(e.target.dataset.measureId);

            

            
            $('.trendbutton').removeClass("active");
            $('.trendbutton').attr('aria-selected', false);

            
            $(e.target).addClass("active");
            $(e.target).attr('aria-selected', true);

            

            
            const measureMetadata = trendMeasures.filter(m => m.MeasureID == measureId);
            const measurementType = measureMetadata[0].MeasurementType;
            const about           = measureMetadata[0].how_calculated;
            const sources         = measureMetadata[0].Sources;
            const display         = measureMetadata[0].DisplayType;


            

            selectedTrendAbout =
                `<h6>${indicatorName} - ${measurementType}</h6>
                <p>${about}</p>`;

            selectedTrendSources =
                `<h6>${indicatorName} - ${measurementType}</h6>
                <p>${sources}</p>`;

            

            renderAboutSources(selectedTrendAbout, selectedTrendSources);


            

            

            const disparities =
                measureMetadata[0].VisOptions[0].Trend &&
                measureMetadata[0].VisOptions[0].Trend[0]?.Disparities;

            

            if (disparities == 0) {

                

                btnShowDisparities.style.display = "none";

                

                $(btnShowDisparities).off()

            } else if (disparities == 1) {

                

                btnShowDisparities.innerText = "Show Disparities";
                $(btnShowDisparities).off()

                

                btnShowDisparities.style.display = "inline";

                

                $(btnShowDisparities).on("click", () => renderDisparities(measureMetadata, 221));

            }


            

            

            filteredTrendData = fullDataTrendObjects.filter(m => m.MeasureID === measureId);


            

            
            
            
            
            

            const measureIdsAnnualAvg = [365, 370, 375, 391];

            
            

            const measureIdsSummer = [386];

            if (measureIdsAnnualAvg.includes(measureId)) {

                const filteredTrendDataAnnualAvg = filteredTrendData.filter(d => d.Time.startsWith('Annual Average'));

                renderTrendChart(filteredTrendDataAnnualAvg, measureMetadata);
                updateChartPlotSize();

            } else if (measureIdsSummer.includes(measureId)) {

                const filteredTrendDataSummer = filteredTrendData.filter(d => d.Time.startsWith('Summer'));

                renderTrendChart(filteredTrendDataSummer, measureMetadata);
                updateChartPlotSize();

            } else {

                renderTrendChart(filteredTrendData, measureMetadata);
                updateChartPlotSize();

            }

            

            selectedTrendMeasure = true;

        }


        

        const updateLinksData = async (e) => {

            

            

            
            $('.linksbutton').removeClass("active");
            $('.linksbutton').attr('aria-selected', false);

            
            $(e.target).addClass("active");
            $(e.target).attr('aria-selected', true);

            

            const primaryMeasureId = parseInt(e.target.dataset.primaryMeasureId);
            const secondaryMeasureId = parseInt(e.target.dataset.secondaryMeasureId);

            
            

            await filterSecondaryIndicatorMeasure(primaryMeasureId, secondaryMeasureId)


            

            

            const linksSecondaryIndicator = indicators.filter(
                indicator => indicator.Measures.some(
                    m => m.MeasureID === secondaryMeasureId
                )
            )

            

            primaryIndicatorName   = indicatorName 
            secondaryIndicatorName = linksSecondaryIndicator[0].IndicatorName

            

            const primaryMeasurementType = primaryMeasureMetadata[0].MeasurementType;
            const secondaryMeasurementType = secondaryMeasureMetadata[0].MeasurementType;

            const primaryAbout = primaryMeasureMetadata[0].how_calculated;
            const secondaryAbout = secondaryMeasureMetadata[0].how_calculated;

            const primarySources = primaryMeasureMetadata[0].Sources;
            const secondarySources = secondaryMeasureMetadata[0].Sources;


            

            selectedLinksAbout =
                `<h6>${primaryIndicatorName} - ${primaryMeasurementType}</h6>
                <p>${primaryAbout}</p>
                <h6>${secondaryIndicatorName} - ${secondaryMeasurementType}</h6>
                <p>${secondaryAbout}</p>`;

            selectedLinksSources =
                `<h6>${primaryIndicatorName} - ${primaryMeasurementType}</h6>
                <p>${primarySources}</p>
                <h6>${secondaryIndicatorName} - ${secondaryMeasurementType}</h6>
                <p>${secondarySources}</p>`;

            

            renderAboutSources(selectedLinksAbout, selectedLinksSources);


            

            

            
            


            

            renderLinksChart(
                joinedDataLinksObjects,
                primaryMeasureMetadata,
                secondaryMeasureMetadata,
                primaryIndicatorName,
                secondaryIndicatorName
            );

            updateChartPlotSize();

            

            selectedLinksMeasure = true;

        }


        
        
        

        

        const setDefaultMapMeasure = (visArray) => {

            
            

            let defaultArray = [];

            const hasAgeAdjustedRate = visArray.filter(measure =>
                measure.MeasurementType.includes('Age Adjusted Rate')
            )
            const hasRate = visArray.filter(measure =>
                measure.MeasurementType.includes('Rate')
            )
            const hasPercent = visArray.filter(measure =>
                measure.MeasurementType.includes('Percent')
            )

            

            if (hasAgeAdjustedRate.length) {

                const hasAgeAdjustedRateTotal = hasAgeAdjustedRate.filter(measure =>
                    measure.MeasurementType.includes('Total')
                )

                
                if (hasAgeAdjustedRateTotal.length) {
                    defaultArray.push(hasAgeAdjustedRateTotal[0]);

                } else {
                    defaultArray.push(hasAgeAdjustedRate[0]);

                }

            } else if (hasRate.length) {
                defaultArray.push(hasRate[0]);

            } else if (hasPercent.length) {
                defaultArray.push(hasPercent[0]);

            } else {
                defaultArray.push(visArray[0]);

            }

            

            defaultMapMetadata = defaultArray;

        }


        

        const setDefaultTrendMeasure = (visArray) => {

            
            

            let defaultArray = [];

            if (visArray.length > 0) {

                const hasAgeAdjustedRate = visArray.filter(measure =>
                    measure.MeasurementType.includes('Age Adjusted Rate')
                )
                const hasRate = visArray.filter(measure =>
                    measure.MeasurementType.includes('Rate')
                )
                const hasPercent = visArray.filter(measure =>
                    measure.MeasurementType.includes('Percent')
                )


                if (hasAgeAdjustedRate.length) {

                    const hasAgeAdjustedRateTotal = hasAgeAdjustedRate.filter(measure =>
                        measure.MeasurementType.includes('Total')
                    )
                    
                    if (hasAgeAdjustedRateTotal.length) {
                        defaultArray.push(hasAgeAdjustedRateTotal[0]);

                    } else {
                        defaultArray.push(hasAgeAdjustedRate[0]);

                    }


                } else if (hasRate.length) {
                    defaultArray.push(hasRate[0]);

                } else if (hasPercent.length) {
                    defaultArray.push(hasPercent[0]);

                } else {
                    defaultArray.push(visArray[0]);

                }
            }

            

            defaultTrendMetadata = defaultArray;
        }


        

        const setDefaultLinksMeasure = async (visArray) => {

            
            

            let defaultArray = [];

            if (visArray.length > 0) {

                const hasAgeAdjustedRate = visArray.filter(measure =>
                    measure.MeasurementType.includes('Age Adjusted Rate')
                )
                const hasRate = visArray.filter(measure =>
                    measure.MeasurementType.includes('Rate')
                )
                const hasPercent = visArray.filter(measure =>
                    measure.MeasurementType.includes('Percent')
                )


                if (hasAgeAdjustedRate.length) {

                    const hasAgeAdjustedRateTotal = hasAgeAdjustedRate.filter(measure =>
                        measure.MeasurementType.includes('Total')
                    )
                    
                    if (hasAgeAdjustedRateTotal.length) {
                        defaultArray.push(hasAgeAdjustedRateTotal[0]);

                    } else {
                        defaultArray.push(hasAgeAdjustedRate[0]);
                    }


                } else if (hasRate.length) {
                    defaultArray.push(hasRate[0]);

                } else if (hasPercent.length) {
                    defaultArray.push(hasPercent[0]);

                } else {
                    defaultArray.push(visArray[0]);

                }

                defaultLinkMeasureTimes = defaultArray[0].AvailableTime;

                const defaultPrimaryMeasureId = defaultArray[0].MeasureID;
                const defaultSecondaryMeasureId = defaultArray[0].VisOptions[0].Links[0].MeasureID;

                
                defaultLinksMetadata = defaultArray;

                

                await filterSecondaryIndicatorMeasure(defaultPrimaryMeasureId, defaultSecondaryMeasureId)

            }
        }


        
        
        

        const renderMeasures = async () => {

            

            linksMeasures.length = 0

            const contentSummary = document.querySelector('#tab-table');
            const contentMap     = document.querySelector('#tab-map')
            const contentTrend   = document.querySelector('#tab-trend');
            const contentLinks   = document.querySelector('#tab-links');

            

            const dropdownTableYear = contentSummary.querySelector('div[aria-labelledby="dropdownTableYear"]');
            const dropdownMapMeasures = document.querySelector('div[aria-labelledby="dropdownMapMeasures"]');

            const dropdownMapYear  = contentMap.querySelector('div[aria-labelledby="dropdownMapYear"]');
            const dropdownTableGeo = contentSummary.querySelector('div[aria-labelledby="dropdownTableGeo"]');
            const dropdownTrendMeasures = contentTrend.querySelector('div[aria-labelledby="dropdownTrendMeasures"]');
            const dropdownLinksMeasures = contentLinks.querySelector('div[aria-labelledby="dropdownLinksMeasures"]');

            

            dropdownTableYear.innerHTML = ``;
            dropdownTableGeo.innerHTML = ``;
            dropdownMapMeasures.innerHTML = ``;
            dropdownTrendMeasures.innerHTML = ``;
            dropdownLinksMeasures.innerHTML = ``;

            mapMeasures.length = 0;
            trendMeasures.length = 0;

            

            const tableYears = [...new Set(fullDataTableObjects.map(item => item.Time))];

            tableYears.forEach((year, index) => {

                if (index === 0) {

                    selectedSummaryYears.push(year);
                    dropdownTableYear.innerHTML +=
                        `<label class="dropdown-item checkbox-year"><input type="radio" name="year" value="${year}" checked /> ${year}</label>`;

                } else {

                    dropdownTableYear.innerHTML +=
                        `<label class="dropdown-item checkbox-year"><input type="radio" name="year" value="${year}" /> ${year}</label>`;
                }

            });

            // create geo dropdown for table

            const tableGeoTypes = [...new Set(fullDataTableObjects.map(item => item.GeoType))];

            tableGeoTypes.forEach((geoType, index) => {

                selectedSummaryGeography.push(geoType);
                dropdownTableGeo.innerHTML += `<label class="dropdown-item checkbox-geo"><input type="checkbox" value="${geoType}" checked /> ${geoType}</label>`;

            });


            // ----- handle measures for this indicator ----- 

            const mapYears = [...new Set(fullDataMapObjects.map(item => item.Time))];

            indicatorMeasures.map((measure, index) => {

                const type = measure?.MeasurementType;
                const displayType = measure?.DisplayType;
                const years = measure?.AvailableTimes.sort((a, b) => b.start_period - a.start_period);
                const geography = measure?.AvailableGeographyTypes;
                const links = measure?.VisOptions[0].Links && measure?.VisOptions[0]?.Links[0];
                const map = measure?.VisOptions[0].Map && measure?.VisOptions[0].Map[0]?.On;
                const trend = measure?.VisOptions[0].Trend && measure?.VisOptions[0].Trend[0]?.On;
                const trendDisparities = measure?.VisOptions[0].Trend && measure?.VisOptions[0].Trend[0]?.Disparities;
                const about = measure.how_calculated;
                const sources = measure.Sources;
                const measureId = measure.MeasureID;


                

                if (map === 1) {

                    mapMeasures.push(measure)

                    dropdownMapMeasures.innerHTML += `<div class="dropdown-column-${index}"><div class="dropdown-title"><strong> ${type}</strong></div></div>`;

                    const dropdownMapMeasuresColumn = document.querySelector(`.dropdown-column-${index}`);

                    mapYears.map((time, index) => {
                        dropdownMapMeasuresColumn.innerHTML += `<button class="dropdown-item link-measure mapbutton"
                        data-measure-id="${measureId}"
                        data-time="${time}">
                        ${time}
                        </button>`;

                    });
                }


                

                if (trend === 1) {

                    trendMeasures.push(measure)

                    if (fullDataTrendObjects) {
                        dropdownTrendMeasures.innerHTML += `<button class="dropdown-item link-measure trendbutton"
                        data-measure-id="${measureId}">
                        ${type}
                        </button>`;
                    }
                }


                // ----- handle links measures ----- 

                if (links) {

                    

                    linksMeasures.push(measure)

                    

                    const secondaryMeasureId = measure.VisOptions[0].Links[0].MeasureID;


                    if (fullDataTableObjects) {

                        const linkYears = [...new Set(fullDataTableObjects.map(item => item.Time))];

                        dropdownLinksMeasures.innerHTML +=
                            `<div class="dropdown-title"><strong> ${type}</strong></div>`;

                        measure.VisOptions[0].Links.map(link => {

                            const linksSecondaryIndicator = indicators.filter(indicator =>
                                indicator.Measures.some(m =>
                                    m.MeasureID === link.MeasureID)
                            );

                            const linksSecondaryMeasure = linksSecondaryIndicator[0].Measures.filter(m =>
                                m.MeasureID === link.MeasureID
                            );

                            dropdownLinksMeasures.innerHTML +=
                                `<button class="dropdown-item link-measure linksbutton"
                                data-primary-measure-id="${measureId}"
                                data-measure-id="${measure.MeasureID}"
                                data-secondary-measure-id="${link.MeasureID}">
                                ${linksSecondaryMeasure[0].MeasureName}
                            </button>`;

                        });
                    }
                }
            });


            setDefaultMapMeasure(mapMeasures);
            setDefaultTrendMeasure(trendMeasures);

            // set default measure for links; also calls filterSecondaryIndicatorMeasure, which creates the joined data

            await setDefaultLinksMeasure(linksMeasures);


            
            
            

            

            

            showTable = (e) => {

                console.log("showTable");

                

                

                if (window.location.hash !== '#display=summary' && window.location.hash !== 'display=summary') {
                    window.location.hash = 'display=summary';
                }

                currentHash = 'display=summary'

                

                tabTable.setAttribute('aria-selected', true);
                tabMap.setAttribute('aria-selected', false);
                tabTrend.setAttribute('aria-selected', false);
                tabLinks.setAttribute('aria-selected', false);


                

                renderTitleDescription(indicatorShortName, indicatorDesc);
                renderAboutSources(measureAbout, measureSources);


                

                renderTable();

                updateChartPlotSize();

                $($.fn.dataTable.tables(false))
                    .DataTable()
                    .columns.adjust().draw();

            };


            

            

            showMap = (e) => {

                

                

                window.location.hash = 'display=map'
                currentHash = 'display=map'

                

                tabTable.setAttribute('aria-selected', false);
                tabMap.setAttribute('aria-selected', true);
                tabTrend.setAttribute('aria-selected', false);
                tabLinks.setAttribute('aria-selected', false);


                

                if (!selectedMapMeasure) {

                    
                    
                    

                    

                    

                    const defaultMapMeasureId = defaultMapMetadata[0].MeasureID;

                    

                    const about   = defaultMapMetadata[0]?.how_calculated;
                    const sources = defaultMapMetadata[0].Sources;
                    const measure = defaultMapMetadata[0].MeasurementType;


                    

                    defaultMapAbout   =
                        `<h6>${indicatorName} - ${measure}</h6>
                        <p>${about}</p>`;

                    defaultMapSources =
                        `<h6>${indicatorName} - ${measure}</h6>
                        <p>${sources}</p>`;

                    

                    renderTitleDescription(indicatorShortName, indicatorDesc);
                    renderAboutSources(defaultMapAbout, defaultMapSources);


                    

                    

                    let mapMeasureData = fullDataMapObjects.filter(
                            obj => obj.MeasureID === defaultMapMeasureId
                        );

                    

                    let latest_end_period = Math.max(mapMeasureData[0].end_period);

                    let mapTimeData = mapMeasureData.filter(
                            obj => obj.end_period === latest_end_period
                        );

                    let latest_time = mapTimeData[0].Time

                    

                    let maxGeoRank = Math.max(mapTimeData[0].GeoRank);

                    filteredMapData = mapTimeData.filter(
                            obj => obj.GeoRank === maxGeoRank
                        );


                    

                    renderMap(filteredMapData, defaultMapMetadata);

                    updateChartPlotSize();

                    

                    
                    $('.mapbutton').removeClass("active");
                    $('.mapbutton').attr('aria-selected', false);

                    

                    let mapMeasureEl = document.querySelector(`.mapbutton[data-measure-id='${defaultMapMeasureId}'][data-time='${latest_time}']`)

                    $(mapMeasureEl).addClass("active");
                    $(mapMeasureEl).attr('aria-selected', true);


                } else {

                    

                    

                    renderAboutSources(selectedMapAbout, selectedMapSources);

                    

                    renderMap(filteredMapData, defaultMapMetadata);

                    updateChartPlotSize();
                }

            };


            

            

            showTrend = (e) => {

                

                

                window.location.hash = 'display=trend'
                currentHash = 'display=trend'

                

                tabTable.setAttribute('aria-selected', false);
                tabMap.setAttribute('aria-selected', false);
                tabTrend.setAttribute('aria-selected', true);
                tabLinks.setAttribute('aria-selected', false);


                

                if (!selectedTrendMeasure) {

                    
                    
                    


                    

                    const about   = defaultTrendMetadata[0]?.how_calculated;
                    const sources = defaultTrendMetadata[0].Sources;
                    const measure = defaultTrendMetadata[0].MeasurementType;


                    

                    defaultTrendAbout =
                        `<h6>${indicatorName} - ${measure}</h6>
                        <p>${about}</p>`;

                    defaultTrendSources =
                        `<h6>${indicatorName} - ${measure}</h6>
                        <p>${sources}</p>`;

                    renderTitleDescription(indicatorShortName, indicatorDesc);
                    renderAboutSources(defaultTrendAbout, defaultTrendSources);


                    

                    

                    const disparities =
                        defaultTrendMetadata[0].VisOptions[0].Trend &&
                        defaultTrendMetadata[0].VisOptions[0].Trend[0]?.Disparities;

                    

                    if (disparities == 0) {

                        

                        btnShowDisparities.style.display = "none";

                        

                        $(btnShowDisparities).off()

                    } else if (disparities == 1) {

                        

                        btnShowDisparities.innerText = "Show Disparities";
                        $(btnShowDisparities).off()

                        

                        btnShowDisparities.style.display = "inline";

                        

                        $(btnShowDisparities).on("click", () => renderDisparities(defaultTrendMetadata, 221))

                    }


                    

                    const defaultTrendMeasureId = defaultTrendMetadata[0].MeasureID;
                    filteredTrendData = fullDataTrendObjects.filter(m => m.MeasureID === defaultTrendMeasureId);


                    

                    
                    
                    
                    
                    

                    const measureIdsAnnualAvg = [365, 370, 375, 391];

                    
                    

                    const measureIdsSummer = [386];

                    if (measureIdsAnnualAvg.includes(defaultTrendMeasureId)) {

                        const filteredTrendDataAnnualAvg = filteredTrendData.filter(d => d.Time.startsWith('Annual Average'));

                        renderTrendChart(filteredTrendDataAnnualAvg, defaultTrendMetadata);
                        updateChartPlotSize();

                    } else if (measureIdsSummer.includes(defaultTrendMeasureId)) {

                        const filteredTrendDataSummer = filteredTrendData.filter(d => d.Time.startsWith('Summer'));

                        renderTrendChart(filteredTrendDataSummer, defaultTrendMetadata);
                        updateChartPlotSize();

                    } else {

                        renderTrendChart(filteredTrendData, defaultTrendMetadata);
                        updateChartPlotSize();

                    }


                    

                    
                    $('.trendbutton').removeClass("active");
                    $('.trendbutton').attr('aria-selected', false);

                    

                    let trendMeasureEl = document.querySelector(`.trendbutton[data-measure-id='${defaultTrendMeasureId}']`)

                    $(trendMeasureEl).addClass("active");
                    $(trendMeasureEl).attr('aria-selected', true);


                } else {

                    

                    

                    renderAboutSources(selectedTrendAbout, selectedTrendSources);

                    

                    renderTrendChart(filteredTrendData, defaultTrendMetadata);

                    updateChartPlotSize();
                }

            };


            

            

            showLinks = (e) => {

                

                

                window.location.hash = 'display=links'
                currentHash = 'display=links'
                

                

                tabTable.setAttribute('aria-selected', false);
                tabMap.setAttribute('aria-selected', false);
                tabTrend.setAttribute('aria-selected', false);
                tabLinks.setAttribute('aria-selected', true);


                

                if (!selectedLinksMeasure) {

                    
                    
                    

                    

                    

                    const secondaryMeasureId = defaultLinksMetadata[0]?.VisOptions[0].Links[0].MeasureID;

                    

                    const linksSecondaryIndicator = indicators.filter(indicator =>
                        indicator.Measures.some(measure =>
                            measure.MeasureID === secondaryMeasureId
                        )
                    )

                    

                    const linksSecondaryMeasure = linksSecondaryIndicator[0].Measures.filter(m =>
                        m.MeasureID === secondaryMeasureId
                    )

                    primaryIndicatorName   = indicatorName;
                    secondaryIndicatorName = linksSecondaryIndicator[0].IndicatorName;

                    

                    const primaryMeasure         = defaultLinksMetadata[0].MeasurementType;
                    const primaryAbout           = defaultLinksMetadata[0].how_calculated;
                    const primarySources         = defaultLinksMetadata[0].Sources;

                    const secondaryMeasure       = linksSecondaryMeasure[0].MeasurementType;
                    const secondaryAbout         = linksSecondaryMeasure[0].how_calculated;
                    const secondarySources       = linksSecondaryMeasure[0].Sources;


                    

                    

                    defaultLinksAbout =
                        `<h6>${primaryIndicatorName} - ${primaryMeasure}</h6>
                        <p>${primaryAbout}</p>
                        <h6>${secondaryIndicatorName} - ${secondaryMeasure}</h6>
                        <p>${secondaryAbout}</p>`;

                    defaultLinksSources =
                        `<h6>${primaryIndicatorName} - ${primaryMeasure}</h6>
                        <p>${primarySources}</p>
                        <h6>${secondaryIndicatorName} - ${secondaryMeasure}</h6>
                        <p>${secondarySources}</p>`;


                    

                    
                    

                    
                    

                    renderTitleDescription(indicatorShortName, indicatorDesc);
                    renderAboutSources(defaultLinksAbout, defaultLinksSources);


                    

                    

                    renderLinksChart(
                        joinedDataLinksObjects,
                        primaryMeasureMetadata,
                        secondaryMeasureMetadata,
                        primaryIndicatorName,
                        secondaryIndicatorName
                    );

                    updateChartPlotSize();


                    

                    
                    $('.linksbutton').removeClass("active");
                    $('.linksbutton').attr('aria-selected', false);

                    

                    let linksMeasureEl = document.querySelector(`.linksbutton[data-secondary-measure-id='${secondaryMeasureId}']`)

                    $(linksMeasureEl).addClass("active");
                    $(linksMeasureEl).attr('aria-selected', true);


                } else {

                    

                    

                    renderAboutSources(selectedLinksAbout, selectedLinksSources);

                    

                    renderLinksChart(
                        joinedDataLinksObjects,
                        primaryMeasureMetadata,
                        secondaryMeasureMetadata,
                        primaryIndicatorName,
                        secondaryIndicatorName
                    );

                    updateChartPlotSize();
                }

            };


            
            
            

            

            const tabTableSelected = tabTable.getAttribute('aria-selected');
            const tabMapSelected   = tabMap.getAttribute('aria-selected');
            const tabTrendSelected = tabTrend.getAttribute('aria-selected');
            const tabLinksSelected = tabLinks.getAttribute('aria-selected');

            

            const disableTab = (el) => {
                el.classList.add('disabled');
                el.setAttribute('aria-disabled', true);
            }

            const enableTab = (el) => {
                el.classList.remove('disabled');
                el.setAttribute('aria-disabled', false);
            }


            
            

            if (mapMeasures.length === 0) {

                if (tabMapSelected && window.location.hash === '#display=map') {

                    console.log("xxx NO MAP!");

                    

                    url.hash = "display=summary";
                    window.history.replaceState({ id: indicatorId, hash: url.hash}, '', url);

                }

                disableTab(tabMap);

            } else {

                enableTab(tabMap);
            }


            const onlyOneTime = trendMeasures.every(m => m.AvailableTimes.length <= 1)

            if (trendMeasures.length === 0 || onlyOneTime) {

                if (tabTrendSelected && window.location.hash === '#display=trend') {

                    console.log("xxx NO TREND!");

                    

                    url.hash = "display=summary";
                    window.history.replaceState({ id: indicatorId, hash: url.hash}, '', url);

                }

                disableTab(tabTrend);

            } else {

                enableTab(tabTrend);
            }


            if (linksMeasures.length === 0) {

                if (tabLinksSelected && window.location.hash === '#display=links') {

                    console.log("xxx NO LINKS!");

                    

                    url.hash = "display=summary";
                    window.history.replaceState({ id: indicatorId, hash: url.hash}, '', url);

                }

                disableTab(tabLinks);

            } else {

                enableTab(tabLinks);
            }


            
            
            

            let hash = window.location.hash.replace('#', "")

            switch (hash) {

                

                case 'display=summary':
                case 'tab-table':
                    $('#tab-btn-table').tab('show');
                    window.dispatchEvent(hashchange);
                    break;

                case 'display=map':
                case 'tab-map':
                    
                    $('#tab-btn-map').tab('show');
                    window.dispatchEvent(hashchange);
                    break;

                case 'display=trend':
                case 'tab-trend':
                    
                    $('#tab-btn-trend').tab('show');
                    window.dispatchEvent(hashchange);
                    break;

                case 'display=links':
                case 'tab-links':
                    
                    $('#tab-btn-links').tab('show');
                    window.dispatchEvent(hashchange);
                    break;

                default:
                    
                    window.dispatchEvent(hashchange);
                    $('#tab-btn-table').tab('show');
            }


            
            
            
            

            

            let mapMeasuresLinks = document.querySelectorAll('.mapbutton');
            let trendMeasuresLinks = document.querySelectorAll('.trendbutton');
            let linksMeasuresLinks = document.querySelectorAll('.linksbutton');

            
            

            mapMeasuresLinks.forEach(link => {
                link.addEventListener('click', updateMapData);
            })

            trendMeasuresLinks.forEach(link => {
                link.addEventListener('click', updateTrendData);
            })

            linksMeasuresLinks.forEach(link => {
                link.addEventListener('click', updateLinksData);
            })


            
            
            

            const checkboxYear = document.querySelectorAll('.checkbox-year');
            const checkboxGeo = document.querySelectorAll('.checkbox-geo');

            checkboxYear.forEach(checkbox => {
                handleYearFilter(checkbox);
            })
            checkboxGeo.forEach(checkbox => {
                handleGeoFilter(checkbox);
            })


            
            
            

            measureAbout = '';
            measureSources = '';
            indicatorMeasures.map(measure => {

                measureAbout +=
                    `<h6>${measure.MeasurementType}</h6>
                    <p>${measure.how_calculated}</p>`;

                measureSources +=
                    `<h6>${measure.MeasurementType}</h6>
                    <p>${measure.Sources}</p>`;

            })

            renderAboutSources(measureAbout, measureSources);

        }


    
    
    

    

    $('#tab-btn-table').on('click', e => {
        $(e.currentTarget).tab('show');
        window.location.hash = 'display=summary'
    })

    

    $('#tab-btn-map').on('click', e => {
        $(e.currentTarget).tab('show');
        window.location.hash = 'display=map'
    })

    

    $('#tab-btn-trend').on('click', e => {
        $(e.currentTarget).tab('show');
        window.location.hash = 'display=trend'
    })

    

    $('#tab-btn-links').on('click', e => {
        $(e.currentTarget).tab('show');
        window.location.hash = 'display=links'
    })

    </script>



</article>



<script type="text/javascript"
    src="https://nychealth.github.io/EH-dataportal/js/accessible-autocomplete.min.a28dbcfe4538f42cec64a42e75429f873bd86641fea0b326b3a4800b59917b99b877d3715b07405ff36917ed9e3cc0873f7b58a65905ff508cd42e8c427a5f9a.js"
    integrity="sha512-oo28/kU49CzsZKQudUKfhzvYZkH&#43;oLMms6SAC1mRe5m4d9NxWwdAX/NpF&#43;2ePMCHP3tYplkF/1CM1C6MQnpfmg=="></script>

<script type="text/javascript">

    function createCitation() {
        
        let today = new Date();
        let dd = String(today.getDate()).padStart(2, '0');
        let mm = String(today.getMonth() + 1).padStart(2, '0'); 
        let yyyy = today.getFullYear();
        today = mm + '/' + dd + '/' + yyyy;

        
        let citation = "New York City Department of Health, Environment & Health Data Portal. "  + `"Health care"` + " data. " + indicatorName + '. Accessed at ' + `"/data-explorer/health-care/"` + ' on ' + today + "."

        
        document.getElementById('citeText').setAttribute('value',citation);

        

        let btn = document.getElementById('citeButton')
        btn.innerHTML = `<i class="fas fa-copy mr-1"></i>Copy citation`

    }

    function copyCitation(){
        let citeText = document.getElementById('citeText')
        citeText.select()
        citeText.setSelectionRange(0,99999);
        navigator.clipboard.writeText(citeText.value)
        let btn = document.getElementById('citeButton')
        btn.innerHTML = `<i class="fas fa-copy mr-1"></i>Copied!`
        
    }

    createCitation();

    

    $("#thisView").on("click", (e) => {

        let summaryTable = $('#tableID').DataTable();
        summaryTable.button("thisView:name").trigger();

        gtag('event', 'file_download', {
            'file_name': 'NYC EH Data Portal - ' + indicatorName + " (filtered)" + '.csv',
            'file_extension': '.csv',
            'link_text': 'Current table view'
        });

        e.stopPropagation();

    });

    

    $("#allData").on("click", (e) => {

        

        let allData = aq.from(fullDataTableObjects)
            .groupby("Time", "GeoType", "GeoID", "GeoRank", "Geography")
            .pivot("MeasurementDisplay", "DisplayCI")
            .relocate(["Time", "GeoType", "GeoID", "GeoRank"], { before: 0 })

        let downloadTableCSV = allData.toCSV();

        
        let csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(downloadTableCSV);
        let hiddenElement = document.createElement('a');

        hiddenElement.href = csvData;
        hiddenElement.target = '_blank';
        hiddenElement.download = 'NYC EH Data Portal - ' + indicatorName + " (full)" + '.csv';
        hiddenElement.click();

        gtag('event', 'file_download', {
            'file_name': hiddenElement.download,
            'file_extension': '.csv',
            'link_text': 'Full table for this indicator'
        });

        e.stopPropagation();

    });

    

    $("#rawData").on("click", (e) => {

        let dataURL = data_repo + "/" + data_branch + '/indicators/data/' + indicatorId + '.json'

        

        aq.loadJSON(`${dataURL}`).then(function(data) {

            let downloadTable = data;
            let downloadTableCSV = downloadTable.toCSV();

            
            let csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(downloadTableCSV);
            let hiddenElement = document.createElement('a');

            hiddenElement.href = csvData;
            hiddenElement.target = '_blank';
            hiddenElement.download = 'NYC EH Data Portal - ' + indicatorName + " (raw)" + '.csv';
            hiddenElement.click();

            gtag('event', 'file_download', {
                'file_name': hiddenElement.download,
                'file_extension': '.csv',
                'link_text': 'Raw data for this indicator'
            });

            e.stopPropagation();

        })
    });


</script>

<ul id="results"></ul>
  </main>
  
  

<script src="https://nychealth.github.io/EH-dataportal//js/conditional-modal.js"></script>
<footer class="bg-black" id="global-footer" role="contentinfo">

  <h2 class="sr-only">
      Page Footer
  </h2>

  <div class="bg-opacity-black-25 text-white" id="nyc-footer">

      <div class="container py-3 d-none" id="languages">

          <div class="row fs-md">

              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="ar">عربى</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="bn">বাঙালি</a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="zh-CN">中文</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="fr">français</a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="ht">Kreyòl Ayisyen</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ko">한국어</a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="pl">Polskie</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ru">русский</a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="es">Español</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ur">اردو</a></li>
                  </ul>
              </div>
          </div>

      </div>
      

      <div class="container py-3" id="languages">

          <ul class="fs-md" role="list">
              <li><a class="lang-select text-reset" href="#" data-lang="ar">عربى</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="bn">বাঙালি</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="zh-CN">中文</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="fr">français</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ht">Kreyòl Ayisyen</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ko">한국어</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="pl">Polskie</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ru">русский</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="es">Español</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ur">اردو</a></li>
          </ul>

      </div>
      

      <hr class="opacity-10" aria-hidden="true">

      <div class="container py-3">
          <div class="row">
              <div class="col-md-6 col-lg-8 mb-3 mb-lg-0">
                  <nav class="row fs-md" role="navigation">
                      <div class="col-lg mb-3 mb-lg-0">
                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/nyc-resources/agencies.page">
                                      <strong>City Agencies</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://a858-nycnotify.nyc.gov/notifynyc/">
                                      <strong>Notify NYC</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset"
                                      href="https://www1.nyc.gov/connect/mobile-applications.page">
                                      <strong>NYC Mobile Apps</strong>
                                  </a>
                              </li>
                          </ul>
                      </div>
                      

                      <div class="col-lg mb-3 mb-lg-0">

                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/home/contact-us.page">
                                      <strong>Contact NYC Government</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://a856-citystore.nyc.gov/">
                                      <strong>CityStore</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://maps.nyc.gov/doitt/nycitymap/">
                                      <strong>Maps</strong>
                                  </a>
                              </li>
                          </ul>

                      </div>
                      

                      <div class="col-lg mb-3 mb-lg-0">

                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset"
                                      href="https://a127-ess.nyc.gov/psp/prdess/?cmd=login&languageCd=ENG&">
                                      <strong>City Employees</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/connect/social-media.page">
                                      <strong>Stay Connected</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset"
                                      href="https://www1.nyc.gov/nyc-resources/resident-toolkit.page">
                                      <strong>Resident Toolkit</strong>
                                  </a>
                              </li>
                          </ul>
                      </div>
                      

                  </nav>
              </div>
              

              <div class="col-md-6 col-lg-4">

                  <a class="mb-2" href="https://www1.nyc.gov" title="Go to nyc.gov" target="_blank">
                      
                      <img class="mb-2" src="https://nychealth.github.io/EH-dataportal/images/nyc-bubble-logo.svg" width="90" alt="NYC Logo">
                      <span class="sr-only">(opens in a new tab)</span>
                  </a>
                  <p class="fs-sm">City of New York - 2019 All Rights Reserved. NYC is a trademark and service
                      mark of the City of New York.</p>

                  <ul class="extensible-list horizontal fs-sm">
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/home/privacy-policy.page">Privacy
                              Policy</a>
                      </li>
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/home/terms-of-use.page">Terms
                              of Use</a>
                      </li>
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/site/mopd/index.page"
                              title="Mayor's Office for People with Disabilities">
                              <span class="sr-only">Mayor's Office for People with Disabilities</span>
                              <span class="fab fa-lg fa-accessible-icon"></span>
                          </a>
                      </li>
                  </ul>

              </div>
              

          </div>
          

      </div>
      

  </div>
  

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>


<script>
  function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'en'
      }, 'google_translate_element');
  }
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>

<script type="text/javascript" 
    src="https://nychealth.github.io/EH-dataportal/js/main.552c9e0eb5b9f567a863809d88dfdb9dfc2e5062f1aa7ae313abbdf21a346fd773ae265f5ff618d8322e2b96b95be1b319c681eb0ea7b818a3c6485a84b6ad5a.js" 
    integrity="sha512-VSyeDrW59WeoY4CdiN/bnfwuUGLxqnrjE6u98ho0b9dzriZfX/YY2DIuK5a5W&#43;GzGcaB6w6nuBijxkhahLatWg=="></script>
<script type="text/javascript" 
    src="https://nychealth.github.io/EH-dataportal/js/search.5b925b298016578cc9f10a3f411ee873f4c8d7554670318dec6bc519e3728c23946c07cf29eae5ee2438fabf76ecc71e8fca6896ccf52726d171743633ff2a1a.js" 
    integrity="sha512-W5JbKYAWV4zJ8Qo/QR7oc/TI11VGcDGN7GvFGeNyjCOUbAfPKerl7iQ4&#43;r927Mcej8polsz1JybRcXQ2M/8qGg=="></script></body>
</html>
